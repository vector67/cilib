<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.4.0, mkdocs-material=2.2.2">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.language" content="">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../img/favicon.png">
<title>Step Â· Cilib</title>
<link rel="stylesheet" href="../assets/stylesheets/application.7a4cdee3.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../lib/modernizr/modernizr.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
<label class="md-overlay" data-md-component="overlay" for="drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="Cilib" class="md-header-nav__button md-logo">
<img src="../img/cilib_logo_transparent.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Cilib
</span>
<span class="md-header-nav__topic">
Step
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="search"></label>
<div class="md-search__inner">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
<label class="md-icon md-search__icon" for="search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/cirg-up/cilib"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
cirg-up/cilib
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<span class="md-nav__button md-logo">
<img src="../img/cilib_logo_transparent.png" width="24" height="24">
</span>
<a href="../index.html" title="Cilib">
Cilib
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/cirg-up/cilib"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
cirg-up/cilib
</div>
</a>

</div>
<label class="md-nav__link" style="padding-left: 12px">
<a href="../blog/index.html" title="Blog">
Blog
</a>
</label>
<label class="md-nav__link" style="padding-left: 12px; padding-bottom: 14px">
<a href="../api/cilib" target="_blank">API</a>
</label>
<ul>
  <li><a href="../design/index.html" class="page">Design</a>
  <ul>
    <li><a href="../design/overview.html" class="page">Overview</a></li>
    <li><a href="../design/lenses.html" class="page">Immutable data</a></li>
    <li><a href="../design/position.html" class="page">Position</a></li>
    <li><a href="../design/entity.html" class="page">Entity</a></li>
    <li><a href="../design/rvar.html" class="page">RVar</a></li>
    <li><a href="../design/step.html" class="active page">Step</a></li>
    <li><a href="../design/step_with_state.html" class="page">Step with state (aka StepS)</a></li>
  </ul></li>
  <li><a href="../usage/index.html" class="page">Usage</a>
  <ul>
    <li><a href="../usage/gbestpso.html" class="page">Global Best PSO (GBestPSO)</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../design/step.html#step" class="header">Step</a>
  <ul>
    <li><a href="../design/step.html#iteration" class="header">Iteration</a></li>
  </ul></li>
</ul>
</nav>

<div class="md-nav__title--site md-version" title="Version">
<i class="md-icon">label_outline</i> 2.0.1-22-g7e5938d
</div>
</nav>

</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../design/step.html#step" class="header">Step</a>
  <ul>
    <li><a href="../design/step.html#iteration" class="header">Iteration</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#step" name="step" class="anchor"><span class="anchor-link"></span></a>Step</h1>
<p>Apart from tracking the effect of randomness, a computational intelligence algorithm requires some additional information:</p>
<ul>
  <li>The optimization scheme (<code>Opt</code>) required, either minimization or maximization</li>
  <li>The fitness function evaluation instance, <code>Eval</code>, which calculates the quality of  the candidate solution</li>
</ul>
<p>The result is a function, which uses a predefined set of values to generate a <code>RVar</code> computation to which randomness still needs to be applied. The function is therefore of the shape</p>
<pre><code>(Opt,Eval[A]) =&gt; RVar[B]
</code></pre>
<p>The predefined set of values required for input is also referred to as the &ldquo;environment&rdquo;. Given that the environment is decided once, at the beginning of the execution process, we can factor out this common parameter using a Kleisli arrow, on this case the <code>ReaderT</code> monad transformer is applicable, resulting in the final type of:</p>
<pre><code>ReaderT[RVar, (Opt,Eval[A]), B]
</code></pre>
<p>Because monad transformers are monads themselves, we can freely compose different <code>Step</code> instances to create a larger computation. The larger computation, being termed the &ldquo;algorithm&rdquo;. Due to the sequencing action of monads, <code>Step</code> instances are analogous to steps in algorithm pseudo-code.</p>
<p>Now that the intention of <code>Step</code> is clearer, lets have a look at some usage. Keep in mind that even though the final &ldquo;shape&rdquo; of the <code>Step</code> is defined, this does not limit the manner in which we can create <code>Step</code> instances. Within a PSO, each particle has several actions applied to it, in order to create a new particle that occupies a different location within the problem search space.</p>
<p>The canonical PSO algorithm iteratively alters the position (and state data) of each particle to create a new particle for each within the collection. The new collection essentially replaces the original collection and this process repeats until some kind of stopping condition is met. Stopping condition logic is intentionally not included within the <code>Step</code>. The type for a PSO is then</p>
<pre><code>List[Particle[S,A]] =&gt; Particle[S,A] =&gt; Step[RVar,(Opt,Eval[A]),Particle[A]]
</code></pre>
<p>and the algorithm definition is:</p>
<pre class="prettyprint"><code class="language-scala">scala&gt; def pso[S](w: Double, c1: Double, c2: Double,
     |   cognitive: Guide[S,Double], social: Guide[S,Double]
     | )(implicit M: HasMemory[S,Double], V: HasVelocity[S,Double]
     | ): NonEmptyList[Particle[S,Double]] =&gt; Particle[S,Double] =&gt; Step[Double,Particle[S,Double]]  =
     |   collection =&gt; x =&gt; for {
     |     cog     &lt;- cognitive(collection, x)
     |     soc     &lt;- social(collection, x)
     |     vel     &lt;- stdVelocity(x, soc, cog, w, c1, c2)
     |     p       &lt;- stdPosition(x, vel)
     |     p2      &lt;- evalParticle(p)
     |     p3      &lt;- updateVelocity(p2, vel)
     |     updated &lt;- updatePBest(p3)
     |   } yield updated
pso: [S](w: Double, c1: Double, c2: Double, cognitive: cilib.pso.Guide[S,Double], social: cilib.pso.Guide[S,Double])(implicit M: cilib.HasMemory[S,Double], implicit V: cilib.HasVelocity[S,Double])scalaz.NonEmptyList[cilib.pso.Particle[S,Double]] =&gt; (cilib.pso.Particle[S,Double] =&gt; cilib.Step[Double,cilib.pso.Particle[S,Double]])
</code></pre>
<p>That sure looks complex! Sure, there are a few things going on there, but it certainly is not complex - the syntax just makes the intention a little hidden due to the verbosity. The <code>pso</code> function defines that there are some parameters that it requires for the <code>stdVelocity</code> function, namely <code>w</code>, <code>c1</code>, <code>c2</code>. Next it requires two individual <code>Guide</code> instances which are the particle attactors for the velocity update equation. In the next parameter group is an implicit parameter that is constraining the types of data elements <code>pso</code> can work with. In this case, the <code>pso</code> requires that all <code>Particle</code> instances (which is just an alias for the type <code>Entity[S,Position[Double]]</code>) must have a <code>HasMemory</code> and <code>HasVelocity</code> instance available for the compiler to provide. As mentioned previously, in the section about lenses and optics, these classy lens instances prevent <code>Entity</code> types that do not have a memory nor a velocity present in their state parameter type. Again, we don&rsquo;t know what the value of <code>S</code> is at the definition level, it will be made concrete when we actually use the <code>pso</code> function.</p>
<p>Every function within the for-comprehension is a function that yields a <code>Step</code> instance of the type <code>Step[Double,Particle[S,Double]]</code> (in this usage example). The individual <code>Step</code>s are then composed into a larger composition that ultimately results in the creation of a new piece of data: the particle which replaces the particle identified by the parameter <code>x</code>.</p>
<h1><a href="#iteration" name="iteration" class="anchor"><span class="anchor-link"></span></a>Iteration</h1>
<p>Algorithms can be executed either synchronously or asynchronously. Given an algorithm definition like the definition of <code>pso</code> above, it may be passed into an iteration function which converts the signature of <code>pso</code> function into the shape:</p>
<pre><code>List[Particle[S,A]] =&gt; RVar[A,Particle[S,A]]
</code></pre>
<p>It is important to note that the manner of execution constrains the amount of parallelism that may be applied to the iteration process. The synchronous scheme can be completely parallelized as there is no reliance on the currently building collection. The asynchronous process on the other hand builds the new collection from a combination of the current and new collections. As a result of the manner in which the asynchronous process executes, parallelism is not possible due to the shared state that is managed during the execution process.</p>
</div>
<div>
<a href="https://github.com/cirg-up/cilib/tree/master/docs/target/site-stage/design/step.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
2.0.1-22-g7e5938d
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../design/rvar.html" title="RVar" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
RVar
</span>
</div>
</a>
<a href="../design/step_with_state.html" title="Step with state (aka StepS)" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Step with state (aka StepS)
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.5165553b.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
