<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.4.0, mkdocs-material=2.2.2">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.language" content="">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../img/favicon.png">
<title>RVar Â· Cilib</title>
<link rel="stylesheet" href="../assets/stylesheets/application.7a4cdee3.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../lib/modernizr/modernizr.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
<label class="md-overlay" data-md-component="overlay" for="drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="Cilib" class="md-header-nav__button md-logo">
<img src="../img/cilib_logo_transparent.png" width="24" height="24">
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Cilib
</span>
<span class="md-header-nav__topic">
RVar
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="search"></label>
<div class="md-search__inner">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
<label class="md-icon md-search__icon" for="search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/cirg-up/cilib"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
cirg-up/cilib
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<span class="md-nav__button md-logo">
<img src="../img/cilib_logo_transparent.png" width="24" height="24">
</span>
<a href="../index.html" title="Cilib">
Cilib
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/cirg-up/cilib"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
cirg-up/cilib
</div>
</a>

</div>
<label class="md-nav__link" style="padding-left: 12px">
<a href="../blog/index.html" title="Blog">
Blog
</a>
</label>
<label class="md-nav__link" style="padding-left: 12px; padding-bottom: 14px">
<a href="../api/cilib" target="_blank">API</a>
</label>
<ul>
  <li><a href="../design/index.html" class="page">Design</a>
  <ul>
    <li><a href="../design/overview.html" class="page">Overview</a></li>
    <li><a href="../design/lenses.html" class="page">Immutable data</a></li>
    <li><a href="../design/position.html" class="page">Position</a></li>
    <li><a href="../design/entity.html" class="page">Entity</a></li>
    <li><a href="../design/rvar.html" class="active page">RVar</a></li>
    <li><a href="../design/step.html" class="page">Step</a></li>
    <li><a href="../design/step_with_state.html" class="page">Step with state (aka StepS)</a></li>
  </ul></li>
  <li><a href="../usage/index.html" class="page">Usage</a>
  <ul>
    <li><a href="../usage/gbestpso.html" class="page">Global Best PSO (GBestPSO)</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
</nav>

<div class="md-nav__title--site md-version" title="Version">
<i class="md-icon">label_outline</i> 2.0.1-22-g7e5938d
</div>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#rvar" name="rvar" class="anchor"><span class="anchor-link"></span></a>RVar</h1>
<p>An instance of <code>RVar</code> represents a computation that, when executed, results in a value with randomness applied. <code>RVar</code> is one of the most important structures in CIlib and is therefore discussed first in order to understand how the data structure works.</p>
<p><code>RVar</code> has a <a href="">monad</a> instance and therefore allows a for a large amount of composition, but more importantly allows for the tracking of randomness within the <code>RVar</code> computation. This tracking is of the utmost importance within computational intelligence algorithms, as randomness needs to be controlled in a manner that facilitates repetition. In other words, even if a computation uses randomness, given the same inputs, the same results are expected even with randomness applied.</p>
<p>Due to the monadic nature of the data structure, the data structure may be transformed by functions such as <code>map</code>, <code>flatMap</code>, etc</p>
<p>There are several predefined combinators that allow the user to use and create <code>RVar</code> computations. These include functions for randomness applied to primitive types (such and <code>Int</code> and <code>Double</code>) to more complex types that build on the primitives, or even for user defined types.</p>
<p>The simplest would be to look at some examples of <code>RVar</code> usage. It is quite common to request several random numbers. <code>RVar</code> provides several functions, with <code>ints</code> and <code>doubles</code> being the most common for random variable creation:</p>
<pre class="prettyprint"><code class="language-scala">scala&gt; val ints = RVar.ints(5)
ints: cilib.RVar[List[Int]] = cilib.RVar$$anon$2@79000631

scala&gt; val doubles = RVar.doubles(5)
doubles: cilib.RVar[List[Double]] = cilib.RVar$$anon$2@479d9f03
</code></pre>
<p>Both functions result in a <code>RVar</code> that, when provided with a pseudo-random number generator (PRNG), will result in a list of values.</p>
<p>The user if free to define a PRNG for themselves, but CIlib provides a default PRNG that is suitable for scientific work. The CMWC generator may be initialized by either providing a seed value for the pseudo-random number stream, or it may be taken from the current time of the computer. It is always recommended to record the seed value, so that others may reproduce results, especially if the results are to be published.</p>
<p>Let&rsquo;s create a <code>RNG</code> instance using both methods:</p>
<pre class="prettyprint"><code class="language-scala">scala&gt; val rng = RNG.init(1234L)
rng: cilib.RNG = cilib.CMWC@77023fee

scala&gt; val fromTimeYOLO = RNG.fromTime
fromTimeYOLO: cilib.RNG = cilib.CMWC@e82046a
</code></pre>
<p>Now, let&rsquo;s run both <code>doubles</code> and <code>ints</code> with the generator:</p>
<pre class="prettyprint"><code class="language-scala">scala&gt; val r1 = ints.run(rng)
r1: (cilib.RNG, List[Int]) = (cilib.CMWC@e55ab4,List(-2012280037, -456312394, -1608573853, -1720473833, 1662253751))

scala&gt; doubles.run(rng)
res0: (cilib.RNG, List[Double]) = (cilib.CMWC@4360fe37,List(0.5314795508050395, 0.6254747152242208, 0.3870236094802634, 0.3590652564475848, 0.1350043437170152))

scala&gt; val r2 = ints.run(rng)
r2: (cilib.RNG, List[Int]) = (cilib.CMWC@65dfe083,List(-2012280037, -456312394, -1608573853, -1720473833, 1662253751))

scala&gt; r1._2 == r2._2
res1: Boolean = true
</code></pre>
<p>The result is a tuple of the state of the PRNG after being used in the computation, together with the result of the computation itself. The important point to note is that running the computation again, with the same PRNG, that is the original state of the PRNG <em>will</em> result in the same obtained results. Unlike the normal PRNG within the JVM platform, obtaining some random value from the source does not implicitly mutate the PRNG. In order to keep selecting from the PRNG stream, the next state of the PRNG should be passed into subsequent computations, when needed:</p>
<pre class="prettyprint"><code class="language-scala">scala&gt; val (rng2, x) = ints.run(rng)
rng2: cilib.RNG = cilib.CMWC@726f3f6a
x: List[Int] = List(-2012280037, -456312394, -1608573853, -1720473833, 1662253751)

scala&gt; val (rng3, y) = ints.run(rng2)
rng3: cilib.RNG = cilib.CMWC@ca5f7e3
y: List[Int] = List(-973239118, 1542173555, 1984558752, 579839250, 609517835)

scala&gt; x != y
res2: Boolean = true
</code></pre>
<p>This manual state passing for the PRNG is very cumbersome and as a result, the monad instance of <code>RVar</code> provides this exact functionality to the user, thereby preventing accidental errors due to incorrect usage of PRNG state. Furthermore, the monad instance for <code>RVar</code> allows for cleaner syntax through the use of a <code>for</code>-comprehension as provided by Scala:</p>
<pre class="prettyprint"><code class="language-scala">scala&gt; val composition = for {
     |   a &lt;- RVar.next[Int] // Get a single Int
     |   b &lt;- RVar.next[Double] // Get a single Double, using the next state of the PRNG
     |   c &lt;- RVar.next[Boolean] // Get a Boolean, again passing the PRNG state
     | } yield if (c) a*b else b
composition: cilib.RVar[Double] = cilib.RVar$$anon$2@5d50578e

scala&gt; composition.run(rng)
res3: (cilib.RNG, Double) = (cilib.CMWC@306778b4,-1.798488339436242E9)
</code></pre>
<p>From this definition of how randomness is managed, we can derive several useful algorithms which operate within the <code>RVar</code> computation. Please refer to the <a href="http://cirg-up.github.io/cilib/api/cilib/RVar$.html">scaladoc</a> for more combinators, but some of the more commonly used are illustrated below:</p>
<pre class="prettyprint"><code class="language-scala">scala&gt; val sampleList = NonEmptyList(6,4,5,2,1,3)
sampleList: scalaz.NonEmptyList[Int] = NonEmpty[6,4,5,2,1,3]

scala&gt; RVar.shuffle(sampleList).run(rng)
res4: (cilib.RNG, scalaz.NonEmptyList[Int]) = (cilib.CMWC@cdb20c1,NonEmpty[4,3,5,1,2,6])

scala&gt; RVar.sample(3, sampleList).run.run(rng)
res5: (cilib.RNG, Option[List[Int]]) = (cilib.CMWC@17edd0cd,Some(List(5, 3, 4)))
</code></pre>
<p>Building on <code>RVar</code>, we can easily define probability distributions from which, randomness may be sampled. The provided distributions, where standard distributions are also defined, include:</p>
<ul>
  <li>Uniform</li>
  <li>Gaussian / Normal</li>
  <li>Cauchy</li>
  <li>Gamma</li>
  <li>Exponential</li>
  <li>etc</li>
</ul>
<p>The interface for the distributions is simply a resulting <code>RVar</code></p>
<pre class="prettyprint"><code class="language-scala">scala&gt; // Use a derived function from monad to repeat an action &#39;n&#39; times
     | Dist.stdNormal.replicateM(5).run(rng)
res7: (cilib.RNG, List[Double]) = (cilib.CMWC@ff51d41,List(0.12471034611540575, 0.10241216207344515, -0.49485286860096944, -2.6592051237450325, 0.7016898748604742))
</code></pre>
</div>
<div>
<a href="https://github.com/cirg-up/cilib/tree/master/docs/target/site-stage/design/rvar.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
2.0.1-22-g7e5938d
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../design/entity.html" title="Entity" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Entity
</span>
</div>
</a>
<a href="../design/step.html" title="Step" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Step
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.5165553b.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
